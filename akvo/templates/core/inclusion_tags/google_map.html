{% load i18n %}

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery.min.js"></script>
<script type="text/javascript" src="{{ jquery_ui_map }}"></script>

<script type="text/javascript">
    var jQ = jQuery.noConflict();
    // Grab variable definitions from template
    var latitude = {{ object.primary_location.latitude }};
    var longitude = {{ object.primary_location.longitude }};
    var center = new google.maps.LatLng(latitude, longitude);
    var icon = '{{ marker_icon }}';
    var markers = [
        {% for location in object.locations.all %}
            {
                icon: icon,
                latitude: {{ location.latitude }},
                longitude: {{ location.longitude }},
                position: new google.maps.LatLng(latitude, longitude)
            },
        {% endfor %}
    ];
    var zoom = {{ zoom }};
    // Load the map
    jQ(document).ready(function() {
        jQ('#mapCanvas').gmap({
            center: center,
            // scrollwheel: false,
            // streetViewControl: false,
            zoom: zoom
        });
        for (marker in markers) {
            jQ('#mapCanvas').gmap('addMarker', marker);
        }
    });
</script>

<div id="mapCanvas" style="width:{{width}}px;height:{{height}}px;"></div>
