/*!
 * jQuery FN Google Map 3.0-beta
 * http://code.google.com/p/jquery-ui-map/
 * Copyright (c) 2010 - 2012 Johan SÃ¤ll Larsson
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
(function(a){a.a=function(f,d,g){a[f]=a[f]||{};a[f][d]=function(h,c){if(arguments.length){this._s(h,c)}};a[f][d].prototype=g;a.fn[d]=function(j){var i=this,h=Array.prototype.slice.call(arguments,1),c=typeof j==="string";if(c&&j.substring(0,1)==="_"){return i}this.each(function(){var l=a.data(this,d);if(!l){l=a.data(this,d,new a[f][d](j,this))}if(c){var k=l[j].apply(l,h);if(k!=null){i=k}}});return i}};a.a("ui","gmap",{options:{mapTypeId:"roadmap",zoom:5},option:function(d,c){if(c){this.options[d]=c;this.get("map").setOptions(this.options)}return this.options[d]},_s:function(d,c){this.el=a(c);jQuery.extend(this.options,d);this.options.center=this._latLng(this.options.center);this._create();if(this._init){this._init()}},_create:function(){var c=this;c._a={map:new google.maps.Map(c.el[0],c.options),markers:[],overlays:[],services:[],iw:new google.maps.InfoWindow};google.maps.event.addListenerOnce(c._a.map,"bounds_changed",function(){c.el.trigger("init",c._a.map)});c._call(c.options.callback,c._a.map)},addBounds:function(c){this.get("bounds",new google.maps.LatLngBounds()).extend(this._latLng(c));this.get("map").fitBounds(this.get("bounds"))},inViewport:function(d){var c=this.get("map").getBounds();return(c)?c.contains(d.getPosition()):false},addControl:function(d,c){this.get("map").controls[c].push(this._unwrap(d))},addMarker:function(h,g,k){h.map=this.get("map");h.position=this._latLng(h.position);var j=new (k||google.maps.Marker)(h);var i=this.get("markers");if(j.id){i[j.id]=j}else{i.push(j)}if(j.bounds){this.addBounds(j.getPosition())}this._call(g,h.map,j);return a(j)},clear:function(c){this._c(this.get(c));this.set(c,[])},_c:function(c){for(b in c){if(c.hasOwnProperty(b)){if(c[b] instanceof google.maps.MVCObject){google.maps.event.clearInstanceListeners(c[b]);c[b].setMap(null)}else{if(c[b] instanceof Array){this._c(c[b])}}c[b]=null}}},find:function(g,f,i){var h=this.get(g);for(e in h){if(h.hasOwnProperty(e)){i(h[e],((f.delimiter&&h[e][f.property])?(h[e][f.property].split(f.delimiter).indexOf(f.value)>-1):(h[e][f.property]===f.value)))}}},get:function(f,d){var j=this._a;if(!j[f]){if(f.indexOf(">")>-1){var h=f.replace(/ /g,"").split(">");for(var g=0;g<h.length;g++){if(!j[h[g]]){if(d){j[h[g]]=((g+1)<h.length)?[]:d}else{return null}}j=j[h[g]]}return j}else{if(d&&!j[f]){this.set(f,d)}}}return j[f]},openInfoWindow:function(d,c){this.get("iw").setOptions(d);this.get("iw").open(this.get("map"),this._unwrap(c))},set:function(d,c){this._a[d]=c},refresh:function(f){var d=this.get("map");var g=d.getCenter();a(d).triggerEvent("resize");d.setCenter(g)},destroy:function(){this.clear("markers");this.clear("services");this.clear("overlays");for(b in this._a){this._a[b]=null}},_call:function(c){if(c&&a.isFunction(c)){c.apply(this,Array.prototype.slice.call(arguments,1))}},_latLng:function(d){if(!d){return new google.maps.LatLng(0,0)}if(d instanceof google.maps.LatLng){return d}else{var c=d.replace(/ /g,"").split(",");return new google.maps.LatLng(c[0],c[1])}},_unwrap:function(c){if(!c){return null}else{if(c instanceof jQuery){return c[0]}else{if(c instanceof Object){return c}}}return a("#"+c)[0]}});jQuery.fn.extend({click:function(d,c){return this.addEventListener("click",d,c)},rightclick:function(c){return this.addEventListener("rightclick",c)},dblclick:function(d,c){return this.addEventListener("dblclick",d,c)},mouseover:function(d,c){return this.addEventListener("mouseover",d,c)},mouseout:function(d,c){return this.addEventListener("mouseout",d,c)},drag:function(c){return this.addEventListener("drag",c)},dragend:function(c){return this.addEventListener("dragend",c)},triggerEvent:function(c){google.maps.event.trigger(this[0],c)},addEventListener:function(f,d,g){if(google.maps&&this[0] instanceof google.maps.MVCObject){google.maps.event.addListener(this[0],f,d)}else{if(g){this.bind(f,d,g)}else{this.bind(f,d)}}return this}})}(jQuery));